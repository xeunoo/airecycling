<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>AI ë¦¬ì‚¬ì´í´ë§</title>

<style>
:root {
  --primary: #10b981;
  --primary-dark: #059669;
  --primary-light: #6ee7b7;
  --accent: #8b5cf6;
  --bg-primary: #ffffff;
  --bg-secondary: #f8fafc;
  --card: #ffffff;
  --text: #0f172a;
  --text-secondary: #64748b;
  --border: #e2e8f0;
  --success: #10b981;
  --gradient-1: linear-gradient(135deg, #10b981 0%, #059669 100%);
  --gradient-bg: linear-gradient(180deg, #f0fdf4 0%, #ffffff 100%);
  --shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  --shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.12);
  --glow: 0 0 30px rgba(16, 185, 129, 0.3);
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  background: var(--gradient-bg);
  color: var(--text);
  line-height: 1.6;
  min-height: 100vh;
}

header {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px);
  padding: 1.2rem 2rem;
  border-bottom: 1px solid var(--border);
  box-shadow: var(--shadow);
  position: sticky;
  top: 0;
  z-index: 100;
}

.header-content {
  max-width: 1200px;
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.logo {
  display: flex;
  align-items: center;
  gap: 0.6rem;
  font-size: 1.5rem;
  font-weight: 800;
  color: var(--primary);
  cursor: pointer;
  transition: transform 0.3s;
}

.logo:hover {
  transform: scale(1.05);
}

.header-right {
  display: flex;
  align-items: center;
  gap: 1.2rem;
}

.location-selector {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.7rem 1.2rem;
  background: var(--bg-secondary);
  border-radius: 12px;
  border: 2px solid var(--border);
  transition: all 0.3s;
}

.location-selector:hover {
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
}

.location-selector select {
  border: none;
  background: none;
  font-size: 0.9rem;
  color: var(--text);
  cursor: pointer;
  outline: none;
  font-weight: 600;
}

.points-display {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.7rem 1.5rem;
  background: var(--gradient-1);
  color: white;
  border-radius: 12px;
  font-weight: 700;
  font-size: 1rem;
  box-shadow: var(--glow);
  transition: all 0.3s;
  cursor: pointer;
}

.points-display:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
}

main {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2.5rem 2rem;
}

.page { display: none; animation: fadeIn 0.5s ease; }
.page.active { display: block; }

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

/* í™ˆ íˆì–´ë¡œ */
.hero {
  text-align: center;
  padding: 4.5rem 2rem;
  background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
  border-radius: 28px;
  margin-bottom: 2.5rem;
  box-shadow: var(--shadow-lg);
  border: 2px solid rgba(16, 185, 129, 0.2);
  position: relative;
  overflow: hidden;
}

.hero::before {
  content: '';
  position: absolute;
  top: -50%;
  right: -10%;
  width: 300px;
  height: 300px;
  background: radial-gradient(circle, rgba(16, 185, 129, 0.15) 0%, transparent 70%);
  border-radius: 50%;
}

.hero::after {
  content: '';
  position: absolute;
  bottom: -30%;
  left: -5%;
  width: 250px;
  height: 250px;
  background: radial-gradient(circle, rgba(16, 185, 129, 0.1) 0%, transparent 70%);
  border-radius: 50%;
}

.hero h1 { 
  font-size: 2.8rem; 
  margin-bottom: 1rem; 
  font-weight: 800;
  color: var(--text);
  position: relative;
  z-index: 1;
}
.hero p { 
  font-size: 1.2rem; 
  color: var(--text-secondary); 
  margin-bottom: 2rem; 
  font-weight: 500;
  position: relative;
  z-index: 1;
}

.cta-button {
  display: inline-flex; 
  align-items: center; 
  gap: 0.6rem;
  padding: 1.2rem 2.5rem; 
  background: var(--gradient-1);
  color: white;
  border: none; 
  border-radius: 14px; 
  font-size: 1.1rem; 
  font-weight: 700;
  cursor: pointer; 
  transition: all 0.3s;
  box-shadow: var(--glow);
  position: relative;
  z-index: 1;
}
.cta-button:hover { 
  transform: translateY(-3px); 
  box-shadow: 0 12px 35px rgba(16, 185, 129, 0.4);
}

/* í†µê³„ */
.stats-section {
  display: grid; 
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem; 
  margin: 2rem 0;
}
.stat-card {
  background: var(--card);
  padding: 2.5rem; 
  border-radius: 20px; 
  text-align: center;
  border: 2px solid var(--border);
  transition: all 0.3s;
  box-shadow: var(--shadow);
  position: relative;
  overflow: hidden;
}

.stat-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: var(--gradient-1);
  transform: scaleX(0);
  transition: transform 0.3s;
}

.stat-card:hover::before {
  transform: scaleX(1);
}

.stat-card:hover { 
  transform: translateY(-8px); 
  border-color: var(--primary);
  box-shadow: var(--shadow-lg);
}
.stat-number { 
  font-size: 3rem; 
  font-weight: 800; 
  color: var(--primary);
  margin-bottom: 0.5rem; 
}
.stat-label { 
  color: var(--text-secondary); 
  font-weight: 600;
  font-size: 0.95rem;
  line-height: 1.5;
}

/* ì •ë³´ ì¹´ë“œ */
.features { 
  display: grid; 
  grid-template-columns: 1fr; 
  gap: 1.8rem; 
  margin-top: 2rem; 
}

.feature-card {
  display: grid;
  grid-template-columns: 110px 1fr;
  gap: 1.8rem;
  background: var(--card);
  border: 2px solid var(--border);
  border-radius: 24px;
  padding: 2.2rem;
  box-shadow: var(--shadow);
  transition: all 0.3s;
}

.feature-card:hover {
  transform: translateY(-5px);
  border-color: var(--primary);
  box-shadow: var(--shadow-lg);
}

.feature-card .feature-icon{
  width: 110px; 
  height: 110px; 
  border-radius: 22px;
  display: grid; 
  place-items: center; 
  font-size: 3.5rem;
  background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
  border: 2px solid rgba(16, 185, 129, 0.2);
}
.feature-card h3{
  font-size: 1.6rem; 
  margin-bottom: 0.6rem;
  color: var(--text);
  font-weight: 800;
}
.feature-card > div > p{
  color: var(--text-secondary); 
  margin-bottom: 1.2rem;
  font-size: 1rem;
}

/* ë¦¬ìŠ¤íŠ¸ */
.info-list{
  list-style: none; 
  display: flex; 
  flex-direction: column; 
  gap: 0.9rem;
}
.info-list li{
  display: flex; 
  align-items: center; 
  gap: 1rem;
  background: var(--bg-secondary);
  border: 2px solid var(--border);
  border-radius: 14px; 
  padding: 1rem 1.3rem;
  transition: all 0.3s;
}

.info-list li:hover {
  background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
  border-color: var(--primary);
  transform: translateX(8px);
}

.info-list .em{
  font-size: 1.6rem; 
  display: inline-grid; 
  place-items: center; 
  width: 36px;
  flex-shrink: 0;
}

.info-list li p {
  color: var(--text-secondary);
  margin: 0;
  font-size: 0.95rem;
}

.info-list li strong {
  color: var(--text);
  font-weight: 700;
}

/* AI ë¶„ì„ í˜ì´ì§€ */
.analyzer-container { max-width: 900px; margin: 0 auto; }
.upload-section {
  background: var(--card);
  border-radius: 28px; 
  padding: 2.5rem;
  box-shadow: var(--shadow-lg);
  text-align: center;
  border: 2px solid var(--border);
}
.upload-section h2 { 
  font-size: 2.2rem; 
  margin-bottom: 0.8rem; 
  color: var(--primary);
  font-weight: 800;
}
.upload-section > p { 
  color: var(--text-secondary); 
  margin-bottom: 1.8rem;
  font-size: 1.05rem;
}

.upload-zone {
  border: 3px dashed var(--primary); 
  border-radius: 20px; 
  padding: 3.5rem 2rem;
  background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%);
  transition: all 0.3s; 
  cursor: pointer; 
}
.upload-zone:hover, .upload-zone.dragover { 
  border-color: var(--primary-dark); 
  background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
  transform: scale(1.02); 
}

.upload-icon { 
  font-size: 4.5rem; 
  margin-bottom: 1.2rem; 
}
.upload-zone label {
  display: inline-block; 
  padding: 1.1rem 2.2rem;
  background: var(--gradient-1);
  color: white; 
  border-radius: 14px; 
  font-weight: 700; 
  cursor: pointer;
  box-shadow: var(--glow);
  transition: all 0.3s;
}

.upload-zone label:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 35px rgba(16, 185, 129, 0.4);
}

.upload-zone input { display: none; }

#preview {
  max-width: 100%; 
  max-height: 450px; 
  border-radius: 20px; 
  margin: 1.8rem auto 0;
  display: none; 
  box-shadow: var(--shadow-lg);
  border: 2px solid var(--border);
}

#loadingMsg {
  display: none; 
  margin-top: 1.8rem; 
  padding: 1.3rem;
  background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
  border: 2px solid #fbbf24;
  border-radius: 14px; 
  color: #92400e; 
  font-weight: 700;
  font-size: 1rem;
}

.result-container {
  display: none; 
  margin-top: 1.8rem;
  background: var(--card);
  border-radius: 28px; 
  padding: 2.2rem;
  box-shadow: var(--shadow-lg);
  border: 2px solid var(--border);
}

.result-header {
  display: flex; 
  align-items: center; 
  gap: 1.2rem; 
  padding: 1.8rem;
  background: var(--gradient-1);
  border-radius: 18px; 
  color: white; 
  margin-bottom: 1.8rem;
  box-shadow: var(--glow);
}
.result-icon { font-size: 2.8rem; }
.result-header h3 { font-size: 1.8rem; font-weight: 800; }

.probabilities {
  display: flex; 
  flex-wrap: wrap; 
  gap: 0.9rem; 
  margin-bottom: 1.8rem;
}
.prob-badge {
  padding: 0.8rem 1.4rem; 
  background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
  border-radius: 12px;
  font-size: 1rem; 
  font-weight: 700; 
  color: var(--text);
  border: 2px solid var(--primary);
  transition: all 0.3s;
}

.prob-badge:hover {
  background: var(--primary);
  color: white;
  transform: translateY(-2px);
}

.guide-box {
  background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%);
  border-left: 5px solid var(--success);
  padding: 1.8rem; 
  border-radius: 16px; 
  margin-top: 1.2rem;
  border: 2px solid rgba(16, 185, 129, 0.3);
}
.guide-box h4 { 
  color: var(--success); 
  margin-bottom: 0.9rem; 
  font-size: 1.3rem; 
  font-weight: 800; 
}

.guide-box p {
  color: var(--text);
  line-height: 1.7;
  font-size: 1rem;
}

/* ë¦¬ì›Œë“œ */
.rewards-container { max-width: 900px; margin: 0 auto; }
.rewards-header {
  background: var(--card);
  padding: 3rem; 
  border-radius: 28px; 
  text-align: center; 
  margin-bottom: 2rem;
  box-shadow: var(--shadow-lg); 
  border: 2px solid var(--border);
}
.rewards-header h2 { 
  font-size: 2.5rem; 
  color: var(--primary);
  font-weight: 800; 
  margin-bottom: 0.5rem;
}
.total-points { 
  font-size: 4rem; 
  font-weight: 800; 
  color: var(--primary);
  margin: 1rem 0; 
}

.rewards-grid { 
  display: grid; 
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); 
  gap: 1.8rem; 
}
.reward-item {
  background: var(--card);
  padding: 2.2rem; 
  border-radius: 24px; 
  box-shadow: var(--shadow);
  border: 2px solid var(--border);
  transition: all 0.3s;
}
.reward-item:hover { 
  transform: translateY(-8px); 
  border-color: var(--primary);
  box-shadow: var(--shadow-lg);
}
.reward-item .reward-icon { 
  font-size: 3rem; 
  margin-bottom: 1.2rem; 
}
.reward-item h4 { 
  font-size: 1.3rem; 
  margin-bottom: 0.6rem;
  color: var(--text);
  font-weight: 700;
}
.reward-item .points-needed { 
  font-size: 1.8rem; 
  font-weight: 800; 
  color: var(--primary);
  margin: 0.6rem 0; 
}
.reward-item p { 
  color: var(--text-secondary); 
  font-size: 0.95rem; 
  line-height: 1.6;
}
.redeem-button { 
  width: 100%; 
  margin-top: 1.2rem; 
  padding: 1rem; 
  background: var(--gradient-1);
  color: #fff; 
  border: none; 
  border-radius: 12px; 
  font-weight: 800; 
  cursor: pointer;
  transition: all 0.3s;
  box-shadow: var(--glow);
  font-size: 1rem;
}

.redeem-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 35px rgba(16, 185, 129, 0.4);
}

.redeem-button:disabled{
  background: var(--border);
  color: var(--text-secondary);
  cursor: not-allowed;
  box-shadow: none;
}

/* ë°˜ì‘í˜• */
@media (max-width: 768px) {
  .hero h1 { font-size: 2rem; }
  .hero p { font-size: 1rem; }
  main { padding: 1.5rem 1rem; }
  .header-right { gap: 0.8rem; }
  .points-display { padding: 0.6rem 1rem; font-size: 0.9rem; }
  .feature-card {
    grid-template-columns: 1fr;
    text-align: center;
  }
  .feature-card .feature-icon {
    margin: 0 auto;
  }
}
</style>
</head>

<body>
<header>
  <div class="header-content">
    <div class="logo" onclick="goToHome()">
      <span>â™»ï¸</span>
      <span>AI ë¦¬ì‚¬ì´í´ë§</span>
    </div>
    <div class="header-right">
      <div class="location-selector">
        <span>ğŸ“</span>
        <select id="regionSelect">
          <option value="">ì§€ì—­ ì„ íƒ</option>
          <option value="ì„œìš¸">ì„œìš¸íŠ¹ë³„ì‹œ</option>
          <option value="ë¶€ì‚°">ë¶€ì‚°ê´‘ì—­ì‹œ</option>
          <option value="ëŒ€êµ¬">ëŒ€êµ¬ê´‘ì—­ì‹œ</option>
          <option value="ê´‘ì£¼">ê´‘ì£¼ê´‘ì—­ì‹œ</option>
          <option value="ì¸ì²œ">ì¸ì²œê´‘ì—­ì‹œ</option>
          <option value="ëŒ€ì „">ëŒ€ì „ê´‘ì—­ì‹œ</option>
          <option value="ìš¸ì‚°">ìš¸ì‚°ê´‘ì—­ì‹œ</option>
          <option value="ì„¸ì¢…">ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ</option>
          <option value="ê²½ê¸°">ê²½ê¸°ë„</option>
          <option value="ì œì£¼">ì œì£¼íŠ¹ë³„ìì¹˜ë„</option>
        </select>
      </div>
      <div class="points-display" onclick="goToRewards()">
        <span>ğŸŒŸ</span>
        <span id="userPoints">0</span>
        <span>P</span>
      </div>
    </div>
  </div>
</header>

<main>
  <!-- í™ˆ -->
  <div id="home" class="page active">
    <div class="hero">
      <h1>ğŸŒ AIê°€ ì•Œë ¤ì£¼ëŠ” ì˜¬ë°”ë¥¸ ë¶„ë¦¬ìˆ˜ê±°</h1>
      <p>ì‚¬ì§„ í•œ ì¥ìœ¼ë¡œ ì‰½ê²Œ í™•ì¸í•˜ê³ , ì„¸ì…˜ ë™ì•ˆ í¬ì¸íŠ¸ë„ ë°›ì•„ë³´ì„¸ìš”!</p>
      <button class="cta-button" onclick="goToAnalyzer()">
        <span>ğŸ“¸</span><span>ì§€ê¸ˆ ì‹œì‘í•˜ê¸°</span>
      </button>
    </div>

    <!-- í†µê³„ -->
    <div class="stats-section">
      <div class="stat-card">
        <div class="stat-number">75%</div>
        <div class="stat-label">ì¬í™œìš© ê°€ëŠ¥ ì“°ë ˆê¸°ê°€<br>ì¼ë°˜ì“°ë ˆê¸°ë¡œ ë²„ë ¤ì§</div>
      </div>
      <div class="stat-card">
        <div class="stat-number">30ë¶„</div>
        <div class="stat-label">ì˜¬ë°”ë¥¸ ë¶„ë¦¬ìˆ˜ê±°ë¡œ<br>ì ˆì•½ë˜ëŠ” ì‹œê°„</div>
      </div>
      <div class="stat-card">
        <div class="stat-number">85kg</div>
        <div class="stat-label">ì—°ê°„ 1ì¸ë‹¹<br>ì¬í™œìš© ê°€ëŠ¥ ì“°ë ˆê¸°ëŸ‰</div>
      </div>
    </div>

    <!-- ì •ë³´ ì¹´ë“œ -->
    <div class="features">
      <div class="feature-card">
        <div class="feature-icon">âŒ</div>
        <div>
          <h3>ìì£¼ í‹€ë¦¬ëŠ” ë¶„ë¦¬ìˆ˜ê±°</h3>
          <p>ë§ì€ ì‚¬ëŒë“¤ì´ í—·ê°ˆë ¤í•˜ëŠ” í’ˆëª©ì„ í™•ì¸í•´ë³´ì„¸ìš”</p>
          <ul class="info-list">
            <li><span class="em">ğŸ•</span><p><strong>í”¼ìë°•ìŠ¤</strong> â€” ê¸°ë¦„ ë¬»ì€ ë¶€ë¶„ì€ ì¼ë°˜ì“°ë ˆê¸°, ê¹¨ë—í•œ ë¶€ë¶„ë§Œ ì¢…ì´ë¥˜</p></li>
            <li><span class="em">ğŸ§´</span><p><strong>íŒí”„í˜• ìš©ê¸°</strong> â€” íŒí”„ëŠ” ì¼ë°˜ì“°ë ˆê¸°, ë³¸ì²´ëŠ” í”Œë¼ìŠ¤í‹±</p></li>
            <li><span class="em">â˜•</span><p><strong>ì¢…ì´ì»µ</strong> â€” ì¢…ì´íŒ©ë¥˜ë¡œ ë¶„ë¦¬</p></li>
            <li><span class="em">ğŸ¥¤</span><p><strong>ë¹¨ëŒ€</strong> â€” ì‚¬ì´ì¦ˆê°€ ì‘ì•„ ì¬í™œìš© ë¶ˆê°€, ì¼ë°˜ì“°ë ˆê¸°</p></li>
          </ul>
        </div>
      </div>

      <div class="feature-card">
        <div class="feature-icon">ğŸ’¡</div>
        <div>
          <h3>ë¶„ë¦¬ìˆ˜ê±° ê¿€íŒ</h3>
          <p>íš¨ìœ¨ì ì¸ ë¶„ë¦¬ìˆ˜ê±°ë¥¼ ìœ„í•œ ì‹¤ìš©ì ì¸ íŒë“¤</p>
          <ul class="info-list">
            <li><span class="em">ğŸ·ï¸</span><p><strong>ë¼ë²¨ ì œê±°</strong> â€” ë”°ëœ»í•œ ë¬¼ì— ë‹´ê°€ë‘ë©´ ì ‘ì°©ì œê°€ í’€ë ¤ ì‰½ê²Œ ë–¨ì–´ì ¸ìš”</p></li>
            <li><span class="em">ğŸ“¦</span><p><strong>ì••ì¶•í•˜ê¸°</strong> â€” í˜íŠ¸Â·ìº”ì€ ì••ì¶•í•˜ë©´ ìˆ˜ê±°/ìš´ë°˜ì´ íš¨ìœ¨ì </p></li>
            <li><span class="em">ğŸ’¦</span><p><strong>í—¹êµ¬ê¸°</strong> â€” í•œ ë²ˆë§Œ í—¹ê¶ˆë„ ì•…ì·¨Â·ì´ë¬¼ì§ˆ ê°ì†Œë¡œ ì¬í™œìš©ë¥  â†‘</p></li>
            <li><span class="em">ğŸ•—</span><p><strong>ë°°ì¶œ ì‹œê°„</strong> â€” ì§€ì—­ ê·œì • ì‹œê°„ì— ë§ì¶° ì €ë…ì— ë‚´ë†“ê¸°</p></li>
          </ul>
        </div>
      </div>

      <div class="feature-card">
        <div class="feature-icon">ğŸŒ±</div>
        <div>
          <h3>í™˜ê²½ ì˜í–¥</h3>
          <p>ì˜¬ë°”ë¥¸ ë¶„ë¦¬ìˆ˜ê±°ê°€ ë§Œë“œëŠ” ê¸ì •ì  ë³€í™”</p>
          <ul class="info-list">
            <li><span class="em">ğŸŒ³</span><p><strong>ë‚˜ë¬´ ì ˆì•½</strong> â€” ì¢…ì´ 1í†¤ ì¬í™œìš© = ë‚˜ë¬´ 17ê·¸ë£¨ ë³´í˜¸</p></li>
            <li><span class="em">âš¡</span><p><strong>ì—ë„ˆì§€ ì ˆê°</strong> â€” í”Œë¼ìŠ¤í‹± ì¬í™œìš© ì‹œ ì›ìœ  ì‚¬ìš©ëŸ‰ ëŒ€í­ ê°ì†Œ</p></li>
            <li><span class="em">ğŸ’§</span><p><strong>ë¬¼ ë³´ì¡´</strong> â€” ì¬í™œìš© ê³µì •ì€ ì‹ ê·œ ìƒì‚° ëŒ€ë¹„ ë¬¼ ì‚¬ìš© â†“</p></li>
            <li><span class="em">ğŸŒ</span><p><strong>íƒ„ì†Œ ê°ì¶•</strong> â€” 1kg ì¬í™œìš©ë‹¹ COâ‚‚ ì•½ 2.5kg ê°ì¶•</p></li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- AI ë¶„ì„ -->
  <div id="analyzer" class="page">
    <div class="analyzer-container">
      <div class="upload-section">
        <h2>ë¶„ë¦¬ìˆ˜ê±° í’ˆëª© ë¶„ì„</h2>
        <p>ë¶„ë¦¬ìˆ˜ê±°ê°€ í•„ìš”í•œ ë¬¼ê±´ì„ ì´¬ì˜í•˜ê±°ë‚˜ ì‚¬ì§„ì„ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”</p>
        
        <div class="location-selector" style="display: inline-flex; margin-bottom: 1.5rem;">
          <span>ğŸ“</span>
          <select id="analyzerRegionSelect">
            <option value="">ì§€ì—­ ì„ íƒ</option>
            <option value="ì„œìš¸">ì„œìš¸íŠ¹ë³„ì‹œ</option>
            <option value="ë¶€ì‚°">ë¶€ì‚°ê´‘ì—­ì‹œ</option>
            <option value="ëŒ€êµ¬">ëŒ€êµ¬ê´‘ì—­ì‹œ</option>
            <option value="ê´‘ì£¼">ê´‘ì£¼ê´‘ì—­ì‹œ</option>
            <option value="ì¸ì²œ">ì¸ì²œê´‘ì—­ì‹œ</option>
            <option value="ëŒ€ì „">ëŒ€ì „ê´‘ì—­ì‹œ</option>
            <option value="ìš¸ì‚°">ìš¸ì‚°ê´‘ì—­ì‹œ</option>
            <option value="ì„¸ì¢…">ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ</option>
            <option value="ê²½ê¸°">ê²½ê¸°ë„</option>
            <option value="ì œì£¼">ì œì£¼íŠ¹ë³„ìì¹˜ë„</option>
          </select>
        </div>
        
        <div class="upload-zone" id="uploadZone">
          <div class="upload-icon">ğŸ“·</div>
          <input id="fileInput" type="file" accept="image/*" />
          <label for="fileInput">ì‚¬ì§„ ì„ íƒ ë˜ëŠ” ì´¬ì˜</label>
          <p style="margin-top: 0.8rem; color: var(--text-secondary); font-size: 0.95rem; font-weight: 600;">
            ë˜ëŠ” ì´ë¯¸ì§€ë¥¼ ë“œë˜ê·¸ ì•¤ ë“œë¡­
          </p>
        </div>

        <img id="preview" alt="ë¯¸ë¦¬ë³´ê¸°"/>
        
        <div id="loadingMsg">ğŸ”„ AIê°€ ì´ë¯¸ì§€ë¥¼ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤...</div>
      </div>

      <div id="result" class="result-container">
        <div class="result-header">
          <span class="result-icon">âœ…</span>
          <div>
            <h3 id="topLabel">ë¶„ì„ ê²°ê³¼</h3>
            <p id="confidence" style="opacity: 0.95; font-size: 1rem; font-weight: 600;"></p>
          </div>
        </div>
        
        <div>
          <h4 style="margin-bottom: 0.8rem; color: var(--text-secondary); font-size: 1rem; font-weight: 800;">
            ì˜ˆì¸¡ í™•ë¥ 
          </h4>
          <div id="topProbs" class="probabilities"></div>
        </div>

        <div id="guide" class="guide-box"></div>

        <button class="cta-button" style="margin-top: 1.5rem; width: 100%;" onclick="resetAnalyzer()">
          â† ë‹¤ì‹œ ë¶„ì„í•˜ê¸°
        </button>
      </div>
    </div>
  </div>

  <!-- ë¦¬ì›Œë“œ -->
  <div id="rewards" class="page">
    <div class="rewards-container">
      <div class="rewards-header">
        <h2>ğŸ ë‚˜ì˜ ë¦¬ì›Œë“œ</h2>
        <p style="color: var(--text-secondary); font-size: 1.05rem; margin-bottom: 0.8rem;">
          ì„¸ì…˜ ë™ì•ˆ ëª¨ì€ í¬ì¸íŠ¸ë¡œ ë¦¬ì›Œë“œë¥¼ êµí™˜í•´ë³´ì„¸ìš”
        </p>
        <div class="total-points" id="totalPoints">0</div>
        <p style="color: var(--text-secondary); font-weight: 600; font-size: 1rem;">ë³´ìœ  í¬ì¸íŠ¸</p>
      </div>

      <div class="rewards-grid">
        <div class="reward-item">
          <div class="reward-icon">ğŸŒ³</div>
          <h4>ë‚˜ë¬´ ì‹¬ê¸° ê¸°ë¶€</h4>
          <div class="points-needed">100P</div>
          <p>ë‹¹ì‹ ì˜ ì´ë¦„ìœ¼ë¡œ ë‚˜ë¬´ 1ê·¸ë£¨ë¥¼ ì‹¬ìŠµë‹ˆë‹¤</p>
          <button class="redeem-button" onclick="redeemReward(100, 'ë‚˜ë¬´ ì‹¬ê¸°')">êµí™˜í•˜ê¸°</button>
        </div>

        <div class="reward-item">
          <div class="reward-icon">â˜•</div>
          <h4>ì¹´í˜ ìŒë£Œ ì¿ í°</h4>
          <div class="points-needed">200P</div>
          <p>ì œíœ´ ì¹´í˜ ì•„ë©”ë¦¬ì¹´ë…¸ ë¬´ë£Œ ì¿ í°</p>
          <button class="redeem-button" onclick="redeemReward(200, 'ì¹´í˜ ì¿ í°')">êµí™˜í•˜ê¸°</button>
        </div>

        <div class="reward-item">
          <div class="reward-icon">ğŸ«</div>
          <h4>ì˜í™” ê´€ëŒê¶Œ</h4>
          <div class="points-needed">300P</div>
          <p>ì˜í™” ê´€ëŒê¶Œ</p>
          <button class="redeem-button" onclick="redeemReward(300, 'ì˜í™” ê´€ëŒê¶Œ')">êµí™˜í•˜ê¸°</button>
        </div>

        <div class="reward-item">
          <div class="reward-icon">ğŸ›ï¸</div>
          <h4>í¸ì˜ì  ìƒí’ˆê¶Œ</h4>
          <div class="points-needed">500P</div>
          <p>í¸ì˜ì  5ì²œì› ìƒí’ˆê¶Œ</p>
          <button class="redeem-button" onclick="redeemReward(500, 'í¸ì˜ì  ìƒí’ˆê¶Œ')">êµí™˜í•˜ê¸°</button>
        </div>
      </div>

      <button class="cta-button" onclick="goToHome()" style="display: block; margin: 2rem auto 0;">
        â† í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°
      </button>
    </div>
  </div>
</main>

<!-- TensorFlow.js -->
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.16.0/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script>

<script>
// ===================== í¬ì¸íŠ¸ (ì„¸ì…˜ í•œì •) =====================
function updatePointUIs() {
  const header = document.getElementById('userPoints');
  const total = document.getElementById('totalPoints');
  if (header) header.textContent = userPoints;
  if (total)  total.textContent  = userPoints;
}
let userPoints = parseInt(sessionStorage.getItem('userPoints') || '0', 10);
updatePointUIs();

function addPoints(p){ userPoints += p; sessionStorage.setItem('userPoints', String(userPoints)); updatePointUIs(); }

function redeemReward(cost, name){
  if (userPoints >= cost){
    if (confirm(`${name}ì„(ë¥¼) ${cost}Pë¡œ êµí™˜í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)){
      userPoints -= cost; sessionStorage.setItem('userPoints', String(userPoints));
      updatePointUIs(); alert(`ğŸ‰ ${name} êµí™˜ ì™„ë£Œ! ë‚¨ì€ í¬ì¸íŠ¸: ${userPoints}P`); updateRedeemButtons();
    }
  } else { alert(`í¬ì¸íŠ¸ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤!\ní•„ìš”: ${cost}P / ë³´ìœ : ${userPoints}P`); }
}
function updateRedeemButtons(){
  document.querySelectorAll('.redeem-button').forEach(btn=>{
    const m = btn.getAttribute('onclick')?.match(/redeemReward\((\d+),/);
    const cost = m ? parseInt(m[1],10) : 0;
    btn.disabled = userPoints < cost;
  });
}

// ì„¸ì…˜ ì¢…ë£Œ/ì´íƒˆ ì‹œ ë¦¬ì…‹
window.addEventListener('pagehide', (e)=>{ if(!e.persisted){ sessionStorage.removeItem('userPoints'); } });
// ë’¤ë¡œê°€ê¸° bfcache ë³µì› ì‹œë„ í¬í•¨ ë¦¬ì…‹
window.addEventListener('pageshow', (e)=>{ if(e.persisted){ sessionStorage.removeItem('userPoints'); userPoints=0; updatePointUIs(); updateRedeemButtons(); } });

// ===================== í˜ì´ì§€ ì „í™˜ =====================
function goToAnalyzer(){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById('analyzer').classList.add('active');
  window.scrollTo(0,0);
  const headerRegion = document.getElementById('regionSelect').value;
  const analyzerRegion = document.getElementById('analyzerRegionSelect');
  if (headerRegion) analyzerRegion.value = headerRegion;
}
function goToHome(){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById('home').classList.add('active');
  window.scrollTo(0,0);
}
function goToRewards(){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById('rewards').classList.add('active');
  updatePointUIs(); updateRedeemButtons(); window.scrollTo(0,0);
}

// ì§€ì—­ ì…€ë ‰íŠ¸ ë™ê¸°í™”
document.getElementById('regionSelect').addEventListener('change', function(){ document.getElementById('analyzerRegionSelect').value = this.value; });
document.getElementById('analyzerRegionSelect').addEventListener('change', function(){ document.getElementById('regionSelect').value = this.value; });

// ===================== ì§€ì—­ ê°€ì´ë“œ =====================
const REGION_GUIDES = {
  "ì„œìš¸": {"í”Œë¼ìŠ¤í‹±":"ë‚´ìš©ë¬¼ì„ ê¹¨ë—ì´ ë¹„ìš°ê³  í—¹êµ° í›„ ë¼ë²¨ì„ ì œê±°í•˜ì—¬ ì••ì°©í•´ ë°°ì¶œí•©ë‹ˆë‹¤.","plastic":"ë‚´ìš©ë¬¼ì„ ê¹¨ë—ì´ ë¹„ìš°ê³  í—¹êµ° í›„ ë¼ë²¨ì„ ì œê±°í•˜ì—¬ ì••ì°©í•´ ë°°ì¶œí•©ë‹ˆë‹¤.","ì¢…ì´":"í…Œì´í”„, ì² í•€ ë“±ì„ ì œê±°í•˜ê³  ì ‘ì–´ì„œ ë°°ì¶œí•©ë‹ˆë‹¤.","paper":"í…Œì´í”„, ì² í•€ ë“±ì„ ì œê±°í•˜ê³  ì ‘ì–´ì„œ ë°°ì¶œí•©ë‹ˆë‹¤.","ìœ ë¦¬":"ë³‘ëšœê»‘ì„ ì œê±°í•˜ê³  í—¹êµ° í›„ ìƒ‰ìƒë³„ë¡œ ë¶„ë¦¬í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.","glass":"ë³‘ëšœê»‘ì„ ì œê±°í•˜ê³  í—¹êµ° í›„ ìƒ‰ìƒë³„ë¡œ ë¶„ë¦¬í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.","ê¸ˆì†":"ìº”ì€ í—¹êµ° í›„ ì••ì°©í•˜ì—¬ ë°°ì¶œí•˜ê³ , ìŠ¤í”„ë ˆì´ëŠ” êµ¬ë©ì„ ëš«ì–´ ë°°ì¶œí•©ë‹ˆë‹¤.","metal":"ìº”ì€ í—¹êµ° í›„ ì••ì°©í•˜ì—¬ ë°°ì¶œí•˜ê³ , ìŠ¤í”„ë ˆì´ëŠ” êµ¬ë©ì„ ëš«ì–´ ë°°ì¶œí•©ë‹ˆë‹¤.","ë¹„ë‹":"ì´ë¬¼ì§ˆì„ ì œê±°í•˜ê³  ê¹¨ë—ì´ ì„¸ì²™í•˜ì—¬ ê±´ì¡° í›„ ë°°ì¶œí•©ë‹ˆë‹¤.","vinyl":"ì´ë¬¼ì§ˆì„ ì œê±°í•˜ê³  ê¹¨ë—ì´ ì„¸ì²™í•˜ì—¬ ê±´ì¡° í›„ ë°°ì¶œí•©ë‹ˆë‹¤.","trash":"ì¬í™œìš©ì´ ë¶ˆê°€ëŠ¥í•œ í’ˆëª©ì€ ì¼ë°˜ì“°ë ˆê¸°ë¡œ ë°°ì¶œí•©ë‹ˆë‹¤."},
  "ë¶€ì‚°": {"í”Œë¼ìŠ¤í‹±":"ê¹¨ë—ì´ ì„¸ì²™í•œ í›„ ë¼ë²¨ ì œê±° í›„ ë°°ì¶œ. PVCëŠ” ì¼ë°˜ì“°ë ˆê¸°.","plastic":"ê¹¨ë—ì´ ì„¸ì²™í•œ í›„ ë¼ë²¨ ì œê±° í›„ ë°°ì¶œ. PVCëŠ” ì¼ë°˜ì“°ë ˆê¸°.","ì¢…ì´":"ë¬¼ê¸°ê°€ ì—†ëŠ” ê¹¨ë—í•œ ì¢…ì´ë§Œ ë°°ì¶œ.","paper":"ë¬¼ê¸°ê°€ ì—†ëŠ” ê¹¨ë—í•œ ì¢…ì´ë§Œ ë°°ì¶œ.","ìœ ë¦¬":"ëšœê»‘ê³¼ ë¼ë²¨ì„ ì œê±°í•˜ê³  í—¹êµ¬ì–´ ë°°ì¶œ.","glass":"ëšœê»‘ê³¼ ë¼ë²¨ì„ ì œê±°í•˜ê³  í—¹êµ¬ì–´ ë°°ì¶œ.","ê¸ˆì†":"ìº” ë‚´ë¶€ë¥¼ í—¹êµ¬ê³  ë¼ë²¨ ì œê±° í›„ ì••ì°©.","metal":"ìº” ë‚´ë¶€ë¥¼ í—¹êµ¬ê³  ë¼ë²¨ ì œê±° í›„ ì••ì°©.","ë¹„ë‹":"íˆ¬ëª…/ìœ ìƒ‰ ë¶„ë¦¬ ë°°ì¶œ.","vinyl":"íˆ¬ëª…/ìœ ìƒ‰ ë¶„ë¦¬ ë°°ì¶œ.","trash":"ì¬í™œìš© ë¶ˆê°€ í’ˆëª©ì€ ì¼ë°˜ì“°ë ˆê¸°."},
  "ëŒ€êµ¬": {"í”Œë¼ìŠ¤í‹±":"ì´ë¬¼ì§ˆ ì œê±° í›„ ì••ì°© ë°°ì¶œ.","plastic":"ì´ë¬¼ì§ˆ ì œê±° í›„ ì••ì°© ë°°ì¶œ.","ì¢…ì´íŒ©":"ë‚´ìš©ë¬¼ì„ ë¹„ìš°ê³  í—¹êµ° ë’¤ ë§ë ¤ì„œ ë°°ì¶œ.","paper":"ë‚´ìš©ë¬¼ì„ ë¹„ìš°ê³  í—¹êµ° ë’¤ ë§ë ¤ì„œ ë°°ì¶œ.","ìœ ë¦¬":"ê¹¨ì§„ ìœ ë¦¬ëŠ” ì‹ ë¬¸ì§€ì— ì‹¸ì„œ ì¼ë°˜ì“°ë ˆê¸°.","glass":"ê¹¨ì§„ ìœ ë¦¬ëŠ” ì‹ ë¬¸ì§€ì— ì‹¸ì„œ ì¼ë°˜ì“°ë ˆê¸°.","ê¸ˆì†":"ìº” ì•ˆìª½ì„ ê¹¨ë—ì´ ì„¸ì²™í•˜ì—¬ ë°°ì¶œ.","metal":"ìº” ì•ˆìª½ì„ ê¹¨ë—ì´ ì„¸ì²™í•˜ì—¬ ë°°ì¶œ.","trash":"ì¬í™œìš© ë¶ˆê°€ í’ˆëª©ì€ ì¼ë°˜ì“°ë ˆê¸°."},
  "ê´‘ì£¼": {"í”Œë¼ìŠ¤í‹±":"PETì™€ ì¼ë°˜ í”Œë¼ìŠ¤í‹± êµ¬ë¶„ ë°°ì¶œ.","plastic":"PETì™€ ì¼ë°˜ í”Œë¼ìŠ¤í‹± êµ¬ë¶„ ë°°ì¶œ.","ì¢…ì´":"ì½”íŒ…ëœ ì¢…ì´ëŠ” ì¼ë°˜ì“°ë ˆê¸°.","paper":"ì½”íŒ…ëœ ì¢…ì´ëŠ” ì¼ë°˜ì“°ë ˆê¸°.","ê¸ˆì†":"ìŠ¤í”„ë ˆì´ ìº”ì€ ì™„ì „íˆ ë¹„ìš°ê³  êµ¬ë© í›„ ë°°ì¶œ.","metal":"ìŠ¤í”„ë ˆì´ ìº”ì€ ì™„ì „íˆ ë¹„ìš°ê³  êµ¬ë© í›„ ë°°ì¶œ.","trash":"ì¬í™œìš© ë¶ˆê°€ í’ˆëª©ì€ ì¼ë°˜ì“°ë ˆê¸°."},
  "ì¸ì²œ": {"í”Œë¼ìŠ¤í‹±":"ë‚´ìš©ë¬¼ ì œê±° í›„ ë¼ë²¨ì„ ë–¼ê³  ë°°ì¶œ.","plastic":"ë‚´ìš©ë¬¼ ì œê±° í›„ ë¼ë²¨ì„ ë–¼ê³  ë°°ì¶œ.","ì¢…ì´":"ë°•ìŠ¤ëŠ” í…Œì´í”„ ì œê±° í›„ í¼ì³ì„œ ë°°ì¶œ.","paper":"ë°•ìŠ¤ëŠ” í…Œì´í”„ ì œê±° í›„ í¼ì³ì„œ ë°°ì¶œ.","ìœ ë¦¬":"ë³‘ëšœê»‘ ë¶„ë¦¬ í›„ í—¹êµ¬ì–´ ë°°ì¶œ.","glass":"ë³‘ëšœê»‘ ë¶„ë¦¬ í›„ í—¹êµ¬ì–´ ë°°ì¶œ.","trash":"ì¬í™œìš© ë¶ˆê°€ í’ˆëª©ì€ ì¼ë°˜ì“°ë ˆê¸°."},
  "ëŒ€ì „": {"í”Œë¼ìŠ¤í‹±":"ê¹¨ë—ì´ ì„¸ì²™ í›„ ì••ì°© ë°°ì¶œ.","plastic":"ê¹¨ë—ì´ ì„¸ì²™ í›„ ì••ì°© ë°°ì¶œ.","ì¢…ì´":"ì´ë¬¼ì§ˆ ì—†ëŠ” ê¹¨ë—í•œ ì¢…ì´ë§Œ ë°°ì¶œ.","paper":"ì´ë¬¼ì§ˆ ì—†ëŠ” ê¹¨ë—í•œ ì¢…ì´ë§Œ ë°°ì¶œ.","ê¸ˆì†":"ìº” ë‚´ë¶€ë¥¼ ë¬¼ë¡œ í—¹êµ° í›„ ë°°ì¶œ.","metal":"ìº” ë‚´ë¶€ë¥¼ ë¬¼ë¡œ í—¹êµ° í›„ ë°°ì¶œ.","trash":"ì¬í™œìš© ë¶ˆê°€ í’ˆëª©ì€ ì¼ë°˜ì“°ë ˆê¸°."},
  "ìš¸ì‚°": {"í”Œë¼ìŠ¤í‹±":"ë¼ë²¨ ì œê±° í›„ ì••ì°© ë°°ì¶œ.","plastic":"ë¼ë²¨ ì œê±° í›„ ì••ì°© ë°°ì¶œ.","ì¢…ì´":"ì –ì€ ì¢…ì´ëŠ” ì¼ë°˜ì“°ë ˆê¸°.","paper":"ì –ì€ ì¢…ì´ëŠ” ì¼ë°˜ì“°ë ˆê¸°.","ìœ ë¦¬":"ê¹¨ì§„ ìœ ë¦¬ë³‘ì€ ì‹ ë¬¸ì§€ë¡œ ê°ì‹¸ ë°°ì¶œ.","glass":"ê¹¨ì§„ ìœ ë¦¬ë³‘ì€ ì‹ ë¬¸ì§€ë¡œ ê°ì‹¸ ë°°ì¶œ.","trash":"ì¬í™œìš© ë¶ˆê°€ í’ˆëª©ì€ ì¼ë°˜ì“°ë ˆê¸°."},
  "ì„¸ì¢…": {"í”Œë¼ìŠ¤í‹±":"ì´ë¬¼ì§ˆ ì œê±° í›„ ì„¸ì²™ ë°°ì¶œ.","plastic":"ì´ë¬¼ì§ˆ ì œê±° í›„ ì„¸ì²™ ë°°ì¶œ.","ì¢…ì´":"ì¢…ì´íŒ©ì€ ë”°ë¡œ ëª¨ì•„ ë°°ì¶œ.","paper":"ì¢…ì´íŒ©ì€ ë”°ë¡œ ëª¨ì•„ ë°°ì¶œ.","ê¸ˆì†":"ìº”ë¥˜ëŠ” ì••ì°© ë°°ì¶œ.","metal":"ìº”ë¥˜ëŠ” ì••ì°© ë°°ì¶œ.","trash":"ì¬í™œìš© ë¶ˆê°€ í’ˆëª©ì€ ì¼ë°˜ì“°ë ˆê¸°."},
  "ê²½ê¸°": {"í”Œë¼ìŠ¤í‹±":"ì„¸ì²™ í›„ ë¼ë²¨ ë¶„ë¦¬, ì••ì°© ë°°ì¶œ.","plastic":"ì„¸ì²™ í›„ ë¼ë²¨ ë¶„ë¦¬, ì••ì°© ë°°ì¶œ.","ì¢…ì´":"í…Œì´í”„Â·ìŠ¤í”„ë§ ë“± ì œê±° í›„ ë°°ì¶œ.","paper":"í…Œì´í”„Â·ìŠ¤í”„ë§ ë“± ì œê±° í›„ ë°°ì¶œ.","ìœ ë¦¬":"ë³‘ëšœê»‘ ë¶„ë¦¬ í›„ í—¹êµ¼ ë°°ì¶œ.","glass":"ë³‘ëšœê»‘ ë¶„ë¦¬ í›„ í—¹êµ¼ ë°°ì¶œ.","ê¸ˆì†":"ìº”ì„ í—¹êµ° í›„ ì••ì°© ë°°ì¶œ.","metal":"ìº”ì„ í—¹êµ° í›„ ì••ì°© ë°°ì¶œ.","trash":"ì¬í™œìš© ë¶ˆê°€ í’ˆëª©ì€ ì¼ë°˜ì“°ë ˆê¸°."},
  "ì œì£¼": {"í”Œë¼ìŠ¤í‹±":"ì„¸ì²™ í›„ ê±´ì¡° ë°°ì¶œ.","plastic":"ì„¸ì²™ í›„ ê±´ì¡° ë°°ì¶œ.","ë¹„ë‹":"ì´ë¬¼ì§ˆ ì™„ì „ ì œê±°Â·ê±´ì¡° ë°°ì¶œ.","vinyl":"ì´ë¬¼ì§ˆ ì™„ì „ ì œê±°Â·ê±´ì¡° ë°°ì¶œ.","ì¢…ì´":"ë¬¼ê¸° ì—†ëŠ” ìƒíƒœë¡œ ë°°ì¶œ.","paper":"ë¬¼ê¸° ì—†ëŠ” ìƒíƒœë¡œ ë°°ì¶œ.","ìŒì‹ë¬¼":"ë¬¼ê¸°ë¥¼ ìµœëŒ€ ì œê±° í›„ ì „ìš©ë´‰íˆ¬ ë°°ì¶œ.","food":"ë¬¼ê¸°ë¥¼ ìµœëŒ€ ì œê±° í›„ ì „ìš©ë´‰íˆ¬ ë°°ì¶œ.","trash":"ì¬í™œìš© ë¶ˆê°€ í’ˆëª©ì€ ì¼ë°˜ì“°ë ˆê¸°."}
};
const DEFAULT_GUIDES = {
  "í”Œë¼ìŠ¤í‹±":"ë‚´ìš©ë¬¼ì„ ë¹„ìš°ê³  í—¹êµ° ë’¤ ë¼ë²¨ ì œê±°, ì••ì°© ë°°ì¶œ",
  "plastic":"ë‚´ìš©ë¬¼ì„ ë¹„ìš°ê³  í—¹êµ° ë’¤ ë¼ë²¨ ì œê±°, ì••ì°© ë°°ì¶œ",
  "ì¢…ì´":"ì´ë¬¼ì§ˆ ì œê±° í›„ ì ‘ì–´ì„œ ë°°ì¶œ",
  "paper":"ì´ë¬¼ì§ˆ ì œê±° í›„ ì ‘ì–´ì„œ ë°°ì¶œ",
  "ìœ ë¦¬":"ë³‘ëšœê»‘ ë¶„ë¦¬, ë‚´ìš©ë¬¼ ë¹„ìš°ê³  í—¹êµ¼",
  "glass":"ë³‘ëšœê»‘ ë¶„ë¦¬, ë‚´ìš©ë¬¼ ë¹„ìš°ê³  í—¹êµ¼",
  "ê¸ˆì†":"ìº”ì€ ë¹„ìš°ê³  í—¹êµ° ë’¤ ì••ì°©",
  "metal":"ìº”ì€ ë¹„ìš°ê³  í—¹êµ° ë’¤ ì••ì°©",
  "ë¹„ë‹":"ì´ë¬¼ì§ˆ ì œê±° í›„ ì„¸ì²™Â·ê±´ì¡°",
  "vinyl":"ì´ë¬¼ì§ˆ ì œê±° í›„ ì„¸ì²™Â·ê±´ì¡°",
  "ìŒì‹ë¬¼":"ë¬¼ê¸° ìµœëŒ€ ì œê±° í›„ ì „ìš©ë´‰íˆ¬",
  "food":"ë¬¼ê¸° ìµœëŒ€ ì œê±° í›„ ì „ìš©ë´‰íˆ¬",
  "ì¼ë°˜ì“°ë ˆê¸°":"ì¬í™œìš© ë¶ˆê°€ í’ˆëª©ì€ ì¼ë°˜ì“°ë ˆê¸°",
  "trash":"ì¬í™œìš© ë¶ˆê°€ í’ˆëª©ì€ ì¼ë°˜ì“°ë ˆê¸°"
};

// ===================== AI ëª¨ë¸ =====================
const TM_URL = "https://teachablemachine.withgoogle.com/models/ZDrUQugEV/";
let model;

const fileInput = document.getElementById('fileInput');
const preview = document.getElementById('preview');
const resultBox = document.getElementById('result');
const topLabel = document.getElementById('topLabel');
const confidence = document.getElementById('confidence');
const probsBox = document.getElementById('topProbs');
const guideBox = document.getElementById('guide');
const loadingMsg = document.getElementById('loadingMsg');
const uploadZone = document.getElementById('uploadZone');

function prepareForNewAnalysis(){
  loadingMsg.style.display = 'block';
  resultBox.style.display = 'none';
  topLabel.textContent = 'ë¶„ì„ ì¤‘â€¦';
  confidence.textContent = '';
  probsBox.innerHTML = '';
  guideBox.innerHTML = '';
}

fileInput.addEventListener('click', ()=>{ fileInput.value=''; });
fileInput.addEventListener('change', async (e)=>{ const f=e.target.files?.[0]; if(f) handleFile(f); });
uploadZone.addEventListener('dragover', (e)=>{ e.preventDefault(); uploadZone.classList.add('dragover'); });
uploadZone.addEventListener('dragleave', ()=> uploadZone.classList.remove('dragover'));
uploadZone.addEventListener('drop', (e)=>{
  e.preventDefault(); uploadZone.classList.remove('dragover');
  const files = e.dataTransfer.files; if(files.length>0) handleFile(files[0]);
});

async function loadModel(){
  try{
    loadingMsg.style.display='block';
    model = await tmImage.load(TM_URL+'model.json', TM_URL+'metadata.json');
  }catch(e){ alert('ëª¨ë¸ ë¡œë”© ì‹¤íŒ¨: '+e); }
  finally{ loadingMsg.style.display='none'; }
}

async function handleFile(file){
  prepareForNewAnalysis();
  const url = URL.createObjectURL(file);
  preview.src = url; preview.style.display='block';
  try{
    if(preview.decode) await preview.decode();
    else await new Promise(r=>{ preview.onload=r; preview.onerror=r; });
  }catch(_){}
  if(!model) await loadModel();
  await predict(preview);
  URL.revokeObjectURL(url);
}

async function predict(img){
  if(!model) return;
  loadingMsg.style.display='block'; resultBox.style.display='none';

  const preds = await model.predict(img,false);
  preds.sort((a,b)=>b.probability-a.probability);
  const top3 = preds.slice(0,3);

  loadingMsg.style.display='none'; resultBox.style.display='block';

  const mainClass = top3[0].className;
  const mainProb = (top3[0].probability*100).toFixed(1);
  topLabel.textContent = mainClass;
  confidence.textContent = `ì‹ ë¢°ë„: ${mainProb}%`;

  probsBox.innerHTML = top3.map(p=>`<span class="prob-badge">${p.className}: ${(p.probability*100).toFixed(1)}%</span>`).join('');

  const region = document.getElementById('regionSelect').value;
  let guideText = "";
  if(region && REGION_GUIDES[region] && REGION_GUIDES[region][mainClass]) guideText = REGION_GUIDES[region][mainClass];
  else if(DEFAULT_GUIDES[mainClass]) guideText = DEFAULT_GUIDES[mainClass];
  else guideText = "í•´ë‹¹ í’ˆëª©ì˜ ë¶„ë¦¬ë°°ì¶œ ê¸°ì¤€ì„ í™•ì¸í•´ì£¼ì„¸ìš”.";

  const regionText = region ? ` (${region})` : "";
  guideBox.innerHTML = `<h4>ğŸ—‘ï¸ ë¶„ë¦¬ë°°ì¶œ ë°©ë²•${regionText}</h4><p>${guideText}</p>`;

  // ì„¸ì…˜ í¬ì¸íŠ¸ +10
  addPoints(10);
}

function resetAnalyzer(){
  preview.style.display='none';
  resultBox.style.display='none';
  fileInput.value='';
}
</script>
</body>
</html>